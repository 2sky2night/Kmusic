import{a as v,c as O,i as L,h as Q,j as X,d as Y,u as Z,s as tt}from"./index-1f548d76.js";import{o as I,a as C,u as q}from"./vue-router-70c59f8f.js";import{g as et,a as st,b as at,c as ot,s as W}from"./index-4e1a89f8.js";import{d as M,I as j,r as y,g as N,o as n,c as m,a as c,F as z,a3 as E,a1 as g,W as d,e as x,$,S as w,V as o,U as b}from"./@vue-923429e4.js";import{d as D,v as nt,N as rt,_ as it,H as ct,D as lt}from"./naive-ui-809e5fbb.js";import{_ as P}from"./vue-img-cutter-7be274e5.js";import{p as _t}from"./index-92c9656a.js";import{a0 as ut,a1 as pt,a2 as dt}from"./@vicons-ed1f5506.js";import"./pinia-6f3a18e1.js";import"./vue-demi-71ba0ef2.js";import"./pinia-plugin-persistedstate-4f3b1591.js";import"./axios-760d4776.js";import"./nprogress-93825526.js";import"./artplayer-dacbf558.js";import"./pubsub-js-4eb33f76.js";/* empty css               */import"./vueuc-f6692277.js";import"./evtd-b614532e.js";import"./seemly-d1bbd19f.js";import"./@css-render-39cdbd82.js";import"./vooks-13ee1ac7.js";import"./vdirs-b0483831.js";import"./@juggle-41516555.js";import"./css-render-d3958e6a.js";import"./@emotion-8a8e73f6.js";import"./lodash-es-c742445b.js";import"./treemate-25c27bff.js";import"./date-fns-975a2d8f.js";const mt={class:"artist-mvs"},ft={class:"music-list"},gt=M({__name:"MVs",setup(A){const f=C(),t=j([]),s=y(!1),i=y(!1);N(()=>{a(+f.params.id)});async function a(l){s.value=!0;try{const r=await et(l,t.length);r.code!==200&&await Promise.reject(),r.mvs.forEach(u=>{t.push(u)}),i.value=r.hasMore,s.value=!1}catch{v("获取歌手mv失败 🤤","warning")}}return I(l=>{t.splice(0,t.length),a(+l.params.id)}),(l,r)=>{const u=O,p=D,_=L;return n(),m("div",mt,[c("div",ft,[c("ul",null,[(n(!0),m(z,null,E(t,e=>(n(),g(u,{key:e.id,"cover-url":e.imgurl,durationms:e.duration,"play-time":e.playCount,title:e.name,vid:e.id,creators:[{userId:e.artist.id,userName:e.artistName}]},null,8,["cover-url","durationms","play-time","title","vid","creators"]))),128))]),i.value&&!s.value?(n(),g(p,{key:0,style:{"align-self":"center",padding:"0 80px"},strong:"",secondary:"",onClick:r[0]||(r[0]=e=>a(+$(f).params.id))},{default:d(()=>[x("加载更多")]),_:1})):w("",!0)]),!s.value&&!t.length?(n(),g(_,{key:0,description:"该歌手没有发布mv哟 😋","show-btn":!1})):w("",!0)])}}}),vt={class:"hot-songs"},ht={key:0},yt=M({__name:"Songs",emits:["subState"],setup(A,{emit:f}){const t=q(),s=C(),i=y(!0),a=j([]);N(()=>{l(+s.params.id)});async function l(u){i.value=!0,a.splice(0,a.length);try{const p=await st(u);p.code!==200&&await Promise.reject(),p.hotSongs.forEach(_=>{a.push(_)}),f("subState",p.artist.followed),i.value=!1}catch{v("获取歌手热门单曲失败 😐","warning")}}function r(){t.push(`/artist-songs/${s.params.id}?page=1`)}return I(u=>{l(+u.params.id)}),(u,p)=>{const _=Q,e=D,h=X,S=L;return n(),m("div",vt,[i.value?(n(),g(h,{key:1,length:10})):(n(),m("ul",ht,[o(_,{"song-list":a},null,8,["song-list"]),a.length?(n(),g(e,{key:0,style:{margin:"10px 0","align-self":"center",padding:"0 50px"},strong:"",secondary:"",onClick:r},{default:d(()=>[x("查看歌手的全部歌曲")]),_:1})):w("",!0)])),!i.value&&!a.length?(n(),g(S,{key:2,description:"该歌手无热门歌曲 🥰","show-btn":!1})):w("",!0)])}}});const bt=P(yt,[["__scopeId","data-v-fbf0859c"]]),xt={class:"artist-albums"},kt={class:"music-list"},$t=M({__name:"Albums",setup(A){const f=C(),t=j([]),s=y(!1),i=y(!1);N(()=>{a(+f.params.id)});async function a(l){i.value=!0;try{const r=await at(l,t.length);r.code!==200&&await Promise.reject(),r.hotAlbums.forEach(u=>{t.push(u)}),s.value=r.more,i.value=!1}catch{v("获取歌手专辑失败 😲","warning")}}return I(l=>{t.splice(0,t.length),a(+l.params.id)}),(l,r)=>{const u=Y,p=D;return n(),m("div",xt,[c("div",kt,[c("ul",null,[(n(!0),m(z,null,E(t,_=>(n(),g(u,{key:_.id,artists:_.artists,id:_.id,name:_.name,"pic-url":_.picUrl,"sub-time":_.publishTime},null,8,["artists","id","name","pic-url","sub-time"]))),128))])]),s.value&&!i.value?(n(),g(p,{key:0,style:{"align-self":"center",padding:"0 80px"},strong:"",secondary:"",onClick:r[0]||(r[0]=_=>a(+$(f).params.id))},{default:d(()=>[x("加载更多")]),_:1})):w("",!0),!i.value&&!t.length?(n(),g(L,{key:1,description:"该歌手没有发布专辑哟 😋","show-btn":!1})):w("",!0)])}}});const wt=P($t,[["__scopeId","data-v-fb9d7c69"]]);const St={},At={class:"artist-skeleton"},It={class:"cover"},Ct={class:"infor"};function Mt(A,f){const t=nt;return n(),m("div",At,[c("div",It,[o(t,{height:"250px",width:"250px",style:{"border-radius":"50%"}})]),c("div",Ct,[o(t,{height:"40px",width:"250px"}),o(t,{height:"30px",width:"300px",style:{margin:"10px 0"}}),o(t,{height:"30px",width:"250px",style:{margin:"10px 0"}}),o(t,{height:"30px",width:"100px",style:{margin:"10px 0"}})])])}const Nt=P(St,[["render",Mt],["__scopeId","data-v-41d5e8f5"]]),Dt={class:"page"},Pt={key:0,class:"artist-infor"},Vt={class:"artist-cover"},Lt=["src"],jt={class:"artist-data"},zt={class:"more-data"},Et=M({__name:"Artist",setup(A){const f=q(),t=C(),s=y(),i=y(!0),a=y(!1),l=Z();N(()=>{p(+t.params.id)});function r(){tt(s.value.artist.briefDesc,"歌手简介")}function u(e){a.value=e}async function p(e){i.value=!0;try{const h=await ot(e);h.code!==200&&await Promise.reject(),s.value=h.data,i.value=!1}catch{v("获取歌手详情信息失败 😪","error"),f.replace("/404")}}async function _(){if(!l.cookie&&!l.isLogin){v("登录后再来操作吧~","info");return}try{if(a.value)(await W(+t.params.id,0)).code===200?(v("取消收藏歌手成功 !🤗","success"),a.value=!1):await Promise.reject();else{v("接口安全问题 暂时不能收藏歌手 😉","info");return}}catch{v("收藏/取消收藏歌手失败 🙄","error")}}return I(e=>{p(+e.params.id)}),(e,h)=>{var B,U,H,R,T,F;const S=rt,G=D,J=it,V=ct,K=lt;return n(),m("div",Dt,[i.value?(n(),g(Nt,{key:1})):(n(),m("div",Pt,[c("div",Vt,[c("img",{src:(B=s.value)==null?void 0:B.artist.avatar,onClick:h[0]||(h[0]=k=>$(_t)(s.value.artist.avatar))},null,8,Lt)]),c("div",jt,[c("h1",null,b((U=s.value)==null?void 0:U.artist.name),1),c("div",null,[(n(!0),m(z,null,E((H=s.value)==null?void 0:H.secondaryExpertIdentiy,k=>(n(),m("span",{key:k.expertIdentiyId},b(k.expertIdentiyName),1))),128))]),c("div",zt,[c("span",null,[o(S,{color:"#4098fc",size:"20",style:{position:"relative",top:"5px"}},{default:d(()=>[o($(ut))]),_:1}),x(" "+b((R=s.value)==null?void 0:R.artist.musicSize)+" 首歌 ",1)]),c("span",null,[o(S,{color:"#4098fc",size:"20",style:{position:"relative",top:"5px"}},{default:d(()=>[o($(pt))]),_:1}),x(" "+b((T=s.value)==null?void 0:T.artist.albumSize)+" 张专辑 ",1)]),c("span",null,[o(S,{color:"#4098fc",size:"20",style:{position:"relative",top:"5px"}},{default:d(()=>[o($(dt))]),_:1}),x(" "+b((F=s.value)==null?void 0:F.artist.mvSize)+" 个MV ",1)]),o(G,{size:"small",strong:"",secondary:"",onClick:_,type:a.value?"warning":"default"},{default:d(()=>[x(b(a.value?"已收藏":"收藏歌手"),1)]),_:1},8,["type"])]),o(J,{"line-clamp":3,tooltip:!1},{default:d(()=>{var k;return[c("span",{style:{"word-break":"break-all",cursor:"pointer"},onClick:r},b((k=s.value)==null?void 0:k.artist.briefDesc),1)]}),_:1})])])),o(K,{type:"segment",animated:""},{default:d(()=>[o(V,{name:"chap1",tab:"热门单曲"},{default:d(()=>[o(bt,{onSubState:u})]),_:1}),o(V,{name:"chap2",tab:"专辑"},{default:d(()=>[o(wt)]),_:1}),o(V,{name:"chap3",tab:"MV"},{default:d(()=>[o(gt)]),_:1})]),_:1})])}}});const pe=P(Et,[["__scopeId","data-v-0d54b189"]]);export{pe as default};
