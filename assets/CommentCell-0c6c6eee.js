import{_ as I}from"./vue-img-cutter-7be274e5.js";import{o as i,c as r,F as $,a3 as L,a1 as y,d as w,r as C,a as t,a9 as c,S as p,U as m,V as d,W as _,$ as v}from"./@vue-923429e4.js";import{v as z,N as B}from"./naive-ui-809e5fbb.js";import{u as N}from"./vue-router-70c59f8f.js";import{r as b,a as g}from"./index-1f548d76.js";import{a7 as S,a8 as U,V,T as P}from"./@vicons-ed1f5506.js";const T={},j={class:"comments-skeleton"};function E(e,s){const a=z;return i(),r("ul",j,[(i(!0),r($,null,L(Array.from({length:10}),(o,u)=>(i(),y(a,{height:"85px",key:u,style:{margin:"8px 0","border-radius":"10px"}}))),128))])}const ie=I(T,[["render",E],["__scopeId","data-v-6aa1b7aa"]]),x=(e,s,a,o)=>b.get("/comment/like",{params:{id:e,cid:s,t:a,type:o}}),ae=(e,s,a,o)=>b.get("/comment",{params:{id:e,t:s,type:a,content:o}}),F={class:"comment-cell"},H={class:"user-avatar-infor"},q={key:0,title:"云音乐会员包",class:"music-package"},A=["src"],D={key:1,title:"云黑椒会员",class:"music-associator"},M=["src"],O=["onClick"],W={key:0,class:"replied-comment"},G=["onClick"],J={style:{"font-size":"12.8px"}},K={class:"comment-data"},Q={style:{"margin-right":"5px"}},X={key:0},Y=w({__name:"CommentCell",props:{comment:null,id:null,userId:null,type:null},setup(e){const s=e,a=N(),o=C(s.comment.liked),u=C(s.comment.likedCount);function k(l){s.comment.owner||l===s.userId?a.push("/my"):a.push(`/user/${l}`)}async function R(){if(!s.userId)return g("请登录后再进行操作 😃","warning");try{o.value?((await x(s.id,s.comment.commentId,0,s.type)).code!==200&&Promise.reject(),o.value=!1,g("取消点赞成功","success"),u.value--):((await x(s.id,s.comment.commentId,1,s.type)).code!==200&&Promise.reject(),o.value=!0,g("点赞成功","success"),u.value++)}catch{g("点赞/取消点赞失败 🙄","error")}}return(l,n)=>{const f=B;return i(),r("li",F,[t("div",H,[n[0]||(c(-1),n[0]=t("img",{class:"user-avatar",onClick:h=>k(e.comment.user.userId),src:e.comment.user.avatarUrl},null,8,["onClick","src"]),c(1),n[0]),e.comment.user.vipRights&&e.comment.user.vipRights.musicPackage?(i(),r("div",q,[t("img",{src:e.comment.user.vipRights.musicPackage.iconUrl},null,8,A)])):p("",!0),e.comment.user.vipRights&&e.comment.user.vipRights.associator?(i(),r("div",D,[t("img",{src:e.comment.user.vipRights.associator.iconUrl},null,8,M)])):p("",!0)]),t("div",null,[n[1]||(c(-1),n[1]=t("div",{class:"user-comment"},[t("span",{onClick:h=>k(e.comment.user.userId),class:"text",style:{"font-size":"14px","font-weight":"600"}},m(e.comment.user.nickname)+": ",9,O),t("span",null,m(e.comment.content),1)]),c(1),n[1]),n[2]||(c(-1),n[2]=e.comment.beReplied.length?(i(),r("div",W,[t("span",{class:"text",onClick:h=>k(e.comment.user.userId)},"@"+m(e.comment.beReplied[0].user.nickname)+": ",9,G),t("span",J,m(e.comment.beReplied[0].content),1)])):p("",!0),c(1),n[2]),t("div",K,[n[3]||(c(-1),n[3]=t("div",null,[t("span",Q,[d(f,{size:"18",style:{position:"relative",top:"4px","margin-right":"5px"}},{default:_(()=>[d(v(S))]),_:1}),t("span",null,m(e.comment.timeStr),1)]),e.comment.ipLocation.location?(i(),r("span",X,[d(f,{size:"18",style:{position:"relative",top:"4px","margin-right":"5px"}},{default:_(()=>[d(v(U))]),_:1}),t("span",null,m(e.comment.ipLocation.location),1)])):p("",!0)]),c(1),n[3]),t("div",null,[d(f,{color:o.value?"red":"",onClick:R,size:"18",style:{cursor:"pointer",position:"relative",top:"-1px","margin-right":"3px"}},{default:_(()=>[o.value?(i(),y(v(V),{key:0})):(i(),y(v(P),{key:1}))]),_:1},8,["color"]),t("span",null,m(u.value),1)])])])])}}});const ce=I(Y,[["__scopeId","data-v-bf3bb3f6"]]);export{ie as C,ce as a,ae as s};
