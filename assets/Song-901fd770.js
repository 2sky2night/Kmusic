import{r as k,e as w,f as z,a as P,h as q,i as $,j as R}from"./index-1f548d76.js";import{P as x}from"./pubsub-js-4eb33f76.js";import{u as B,o as j,a as E}from"./vue-router-70c59f8f.js";import{d as I,r as c,I as L,m as U,g as V,w as _,o as n,c as l,V as d,$ as f,a1 as v}from"./@vue-923429e4.js";import{F as C}from"./naive-ui-809e5fbb.js";import{_ as F}from"./vue-img-cutter-7be274e5.js";import"./pinia-6f3a18e1.js";import"./vue-demi-71ba0ef2.js";import"./pinia-plugin-persistedstate-4f3b1591.js";import"./axios-760d4776.js";import"./nprogress-93825526.js";import"./artplayer-dacbf558.js";import"./@vicons-ed1f5506.js";/* empty css               */import"./vueuc-f6692277.js";import"./evtd-b614532e.js";import"./seemly-d1bbd19f.js";import"./@css-render-39cdbd82.js";import"./vooks-13ee1ac7.js";import"./vdirs-b0483831.js";import"./@juggle-41516555.js";import"./css-render-d3958e6a.js";import"./@emotion-8a8e73f6.js";import"./lodash-es-c742445b.js";import"./treemate-25c27bff.js";import"./date-fns-975a2d8f.js";const M=()=>k.get("/personalized/newsong",{params:{limit:1e3}}),N={class:"discover-song"},A={key:0,class:"song-list"},D={key:0,class:"pagination"},G=I({__name:"Song",setup(H){const m=B(),r=E(),u=c(!0),i=L([]),t=c(r.query.page?w(+r.query.page):1),s=c(10),g=U(()=>{const e=(t.value-1)*s.value;return i.slice(e,e+s.value)}),h=[{label:"10 每页",value:10},{label:"20 每页",value:20},{label:"30 每页",value:30},{label:"50 每页",value:50}];return V(async()=>{try{const e=await M();e.code!==200&&await Promise.reject();const o=await z(e.result.map(a=>a.song.id));o.code!==200&&await Promise.reject(),o.songs.forEach(a=>{i.push({...a,privilege:o.privileges[0]})}),u.value=!1}catch{P("获取新音乐失败 😪","warning")}}),_(t,e=>{m.push({path:r.path,query:{page:e}})}),_(s,()=>{if(t.value===1){x.publish("to-top");return}m.push({path:r.path,query:{page:1}})}),j(e=>{t.value=+e.query.page}),(e,o)=>{const a=q,y=C,S=$,b=R;return n(),l("div",N,[u.value?(n(),v(b,{key:1,length:20})):(n(),l("ul",A,[d(a,{"song-list":f(g)},null,8,["song-list"]),f(g).length?(n(),l("div",D,[d(y,{"page-slot":6,page:t.value,"onUpdate:page":o[0]||(o[0]=p=>t.value=p),"page-size":s.value,"onUpdate:pageSize":o[1]||(o[1]=p=>s.value=p),"show-size-picker":"","page-sizes":h,"item-count":i.length},null,8,["page","page-size","item-count"])])):(n(),v(S,{key:1,description:"这一页没有数据哦 😎","show-btn":!1}))]))])}}});const ve=F(G,[["__scopeId","data-v-abf155c0"]]);export{ve as default};
