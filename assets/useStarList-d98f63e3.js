import{a as y,u as $}from"./vue-router-70c59f8f.js";import{o as p,a as f}from"./index-1f548d76.js";import{r,I as L,g as M,w as g}from"./@vue-923429e4.js";const R=()=>{const e=y();return{params:e.params,query:e.query,$route:e}},q=(e,m)=>{const v=$(),{$route:h,params:l}=R(),s=r(l.page?+l.page:1),i=24,t=r(!1);let o=r(0);const u=L([]),w=r(!0),n=r(!1);async function c(){t.value=!0;const a=await e(s.value);if(w.value=a.hasMore,a.data.length===0){n.value=!0,f("请求的页数非法或还没有收藏呢","warning"),t.value=!1;return}if(a.code===200)return u.splice(0,u.length),a.data.forEach(d=>{u.push(d)}),t.value=!1,a.count}return M(async()=>{if(s.value>1){const a=await e(1);o.value=p(i,a.count),c()}else if(s.value===1){const a=await c();o.value=p(i,a)}else f("请求参数非法","error"),n.value=!0,t.value=!1}),g(s,a=>{v.push({name:m,params:{page:a}}),c()}),g(()=>h.params.page,a=>{a&&(s.value=+a)}),{isLoading:t,page:s,pages:o,list:u,isEmpty:n}},x=q;export{x as u};
