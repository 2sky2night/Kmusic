import{r as x,a as d,_ as C,c as L,i as B}from"./index-1f548d76.js";import{u as M}from"./useSearchList-34053338.js";import{d as N,I as b,o as i,c as f,a as E,F,a3 as U,$ as t,a1 as u,W as V,e as $,U as j,L as h,S as l}from"./@vue-923429e4.js";import{F as D}from"./naive-ui-809e5fbb.js";import"./pinia-6f3a18e1.js";import"./vue-demi-71ba0ef2.js";import"./pinia-plugin-persistedstate-4f3b1591.js";import"./axios-760d4776.js";import"./nprogress-93825526.js";import"./artplayer-dacbf558.js";import"./@vicons-ed1f5506.js";import"./vue-router-70c59f8f.js";import"./vue-img-cutter-7be274e5.js";import"./pubsub-js-4eb33f76.js";/* empty css               */import"./vueuc-f6692277.js";import"./evtd-b614532e.js";import"./seemly-d1bbd19f.js";import"./@css-render-39cdbd82.js";import"./vooks-13ee1ac7.js";import"./vdirs-b0483831.js";import"./@juggle-41516555.js";import"./css-render-d3958e6a.js";import"./@emotion-8a8e73f6.js";import"./lodash-es-c742445b.js";import"./treemate-25c27bff.js";import"./date-fns-975a2d8f.js";const I=(g,r,n=20)=>x.get("/cloudsearch",{params:{keywords:g,type:1004,offset:(r-1)*n,limit:n}}),P={class:"search-tab music-list"},ge=N({__name:"Mv",setup(g){const r=b([]),{keywords:n,page:p,pageSize:o,pageSizes:v,isLoading:c,total:m}=M(y);async function y(){r.length=0;try{const a=await I(n.value,p.value,o.value);if(r.length)return;if(a.code!==200&&await Promise.reject(),Object.keys(a.result).length===0){d("搜索结果为空 👀","info");return}m.value=a.result.mvCount,a.result.mvs.forEach(s=>r.push(s))}catch{d("搜索视频失败 🤩","warning")}}return(a,s)=>{const k=L,z=D,S=B,w=C;return i(),f("div",P,[E("ul",null,[(i(!0),f(F,null,U(r,e=>(i(),u(k,{key:e.id,"cover-url":e.cover,creators:e.artists.map(_=>({userId:_.id,userName:_.name})),durationms:e.duration,"play-time":e.playCount,title:e.name,vid:e.id},null,8,["cover-url","creators","durationms","play-time","title","vid"]))),128))]),t(m)/t(o)>1&&r.length&&!t(c)?(i(),u(z,{key:0,style:{"align-self":"center"},"page-slot":6,page:t(p),"onUpdate:page":s[0]||(s[0]=e=>h(p)?p.value=e:null),"item-count":t(m),"page-size":t(o),"onUpdate:pageSize":s[1]||(s[1]=e=>h(o)?o.value=e:null),"show-size-picker":"","page-sizes":t(v)},{prefix:V(()=>[$(" 共 "+j(t(m))+" 项 ",1)]),_:1},8,["page","item-count","page-size","page-sizes"])):l("",!0),!r.length&&!t(c)?(i(),u(S,{key:1,description:"搜索的关键词太犀利了,没有搜索结果呢 🥱","show-btn":!0})):l("",!0),t(c)?(i(),u(w,{key:2,length:t(o),"cover-radius":10,"text-center":!1},null,8,["length"])):l("",!0)])}}});export{ge as default};
