import{r as g,u as k,l as v,a as U,_ as x}from"./index-1f548d76.js";import{U as C,a as I}from"./UserSkeleton-f2f0991f.js";import{a as $,u as P}from"./vue-router-70c59f8f.js";import{d as y,r as f,w as S,o as r,a1 as c,W as w,c as d,F as b,a3 as B,U as L,I as M,g as R,V as _,$ as V,a6 as j,p as A}from"./@vue-923429e4.js";import{C as D,D as F,I as O}from"./naive-ui-809e5fbb.js";import{_ as q}from"./vue-img-cutter-7be274e5.js";import"./pinia-6f3a18e1.js";import"./vue-demi-71ba0ef2.js";import"./pinia-plugin-persistedstate-4f3b1591.js";import"./axios-760d4776.js";import"./nprogress-93825526.js";import"./artplayer-dacbf558.js";import"./@vicons-ed1f5506.js";import"./pubsub-js-4eb33f76.js";/* empty css               */import"./vueuc-f6692277.js";import"./evtd-b614532e.js";import"./seemly-d1bbd19f.js";import"./@css-render-39cdbd82.js";import"./vooks-13ee1ac7.js";import"./vdirs-b0483831.js";import"./@juggle-41516555.js";import"./css-render-d3958e6a.js";import"./@emotion-8a8e73f6.js";import"./lodash-es-c742445b.js";import"./treemate-25c27bff.js";import"./date-fns-975a2d8f.js";const E=()=>g.get("/user/account"),H=()=>g.get("/user/level"),N=y({__name:"TabBar",props:{list:null},setup(u){const m=u,s=$(),t=P(),a=f(s.path);function p(n){t.push(n),a.value=n}return S(s,n=>{const e=n.path.split("/");e.length===4&&e.pop(),e.splice(0,2),m.list.some(o=>{o.path.includes(e[0])&&(a.value=o.path)})}),(n,e)=>{const o=D,i=F;return r(),c(i,{type:"segment","onUpdate:value":[p,e[0]||(e[0]=l=>a.value=l)],value:a.value,style:{margin:"10px 0"}},{default:w(()=>[(r(!0),d(b,null,B(u.list,l=>(r(),c(o,{name:l.path,textContent:L(l.title)},null,8,["name","textContent"]))),256))]),_:1},8,["value"])}}}),T={class:"page"},W={key:3,class:"music-list",style:{"margin-top":"50px"}},z=y({__name:"My",setup(u){const m=[{path:"/my/playlist",title:"歌单"},{path:"/my/star-artist/1",title:"收藏的歌手"},{path:"/my/star-album/1",title:"收藏的专辑"},{path:"/my/star-mv/1",title:"收藏的mv"}],s=k(),t=M({}),a=f(!1);A("isOk",a);const p=f(0);function n(e){s.setUserData(e.profile.nickname,e.profile.avatarUrl,e.level),t.avatar=e.profile.avatarUrl,t.nickname=e.profile.nickname,t.level=e.level,t.eventCount=e.profile.eventCount,t.gender=e.profile.privacyItemUnlimit.gender,t.followeds=e.profile.followeds,t.follows=e.profile.follows,t.signature=e.profile.signature,t.createDays=e.createDays}return R(async()=>{try{if(s.userData.id){const o=await v(s.userData.id);o.code!==200&&await Promise.reject(),n(o)}else{const o=await E();s.setUserId(o.account.id);const i=await v(o.account.id);i.code!==200&&await Promise.reject(),n(i)}const e=await H();e.code!==200&&await Promise.reject(),p.value=e.data.progress*100,a.value=!0}catch{U("出错啦!😭","error")}}),(e,o)=>{const i=O,l=x,h=j("RouterView");return r(),d("div",T,[a.value?(r(),c(C,{key:1,avatar:t.avatar,"create-days":t.createDays,"event-count":t.eventCount,followeds:t.followeds,follows:t.follows,gender:t.gender,level:t.level,nickname:t.nickname,signature:t.signature,id:V(s).userData.id},{default:w(()=>[_(i,{style:{width:"100px","margin-left":"10px"},type:"line",percentage:p.value,"show-indicator":!1},null,8,["percentage"])]),_:1},8,["avatar","create-days","event-count","followeds","follows","gender","level","nickname","signature","id"])):(r(),c(I,{key:0})),a.value?(r(),c(N,{key:2,list:m})):(r(),d("div",W,[_(l,{length:12,"cover-radius":10,"text-center":!1})])),_(h)])}}});const he=q(z,[["__scopeId","data-v-6444601c"]]);export{he as default};
